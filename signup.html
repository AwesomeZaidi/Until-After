<!DOCTYPE html>
<head>

    <script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>
    <script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyDNDQyelNZWOZn_U6FJaLtCXmIIdLBXVgc",
        authDomain: "untilafter-ef04f.firebaseapp.com",
        databaseURL: "https://untilafter-ef04f.firebaseio.com",
        storageBucket: "untilafter-ef04f.appspot.com",
        messagingSenderId: "2139413960"
    };
    firebase.initializeApp(config);
    var database = firebase.database();
    </script>
    
    <script type="text/javascript"> 
    // String.prototype.hashCode = function(){
	// var hash = 0;
	// if (this.length == 0) return hash;
	// for (i = 0; i < this.length; i++) {
	// 	char = this.charCodeAt(i);
	// 	hash = ((hash<<5)-hash)+char;
	// 	hash = hash & hash; // Convert to 32bit integer
	// }
	// return hash;
    // }   

    function writeUserData(username, password) {
        
        console.log("WriteUserData enter");
        
        var x = firebase.database().ref('users/' + username).set({
            username: username,
            password: password        
        });
        console.log("Firebase object " + x);

        set({ first: 'Fred', last: 'Flintstone' });
    } 

    function submitForm() {
        console.log("In submitForm");
        console.log(window.location);
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;            
        console.log("Username and Password " + username + ", " + password);   

        var promise = new Promise(function(resolve, reject) {
            console.log("Written to database");
            writeUserData(username, password);
            resolve();
        })
        promise.then(redirectToJournal());

        var y = document.write(snapshot.key());
        console.error(y);
    };

    function redirectToJournal(){
        console.log("redirecting to journal");
        console.log(window.location);
        window.location.href = "journal.html";
        console.log(window.location);
    }
    
    </script>

    
    
</head>
<body>
    <link rel="stylesheet" href="styles.css">
    <div class = "container">
        <div class="wrapper">
            <form name="Login_Form" class="form-signin">       
                <h3 class="form-signin-heading">Create an account FOR LIFE!</h3>
                <hr class="colorgraph"><br>
                
                <input id="username" type="text" class="form-control" name="username" placeholder="Username" required="" autofocus="" />
                <input id="password" type="password" class="form-control" name="password" placeholder="Password" required=""/>     		  
                
                <button onClick="submitForm()" value="Login" type="button">Login</button>			
            </form>			
        </div>
    </div>



</body>

</html>